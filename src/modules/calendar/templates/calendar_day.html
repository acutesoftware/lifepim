{% extends "layout.html" %}
{% block module_content %}
<div class="calendar-controls">
  <div class="calendar-views">
    <a href="{{ url_for('calendar.month_view_route', year=view_date.year, month=view_date.month, proj=project) }}">Monthly</a> |
    <a href="{{ url_for('calendar.week_view_route', date=view_date.strftime('%Y-%m-%d'), proj=project) }}">Weekly</a> |
    <a href="{{ url_for('calendar.day_view_route', date=view_date.strftime('%Y-%m-%d'), proj=project) }}">Daily</a> |
    <a href="{{ url_for('calendar.year_view_route', year=view_date.year, proj=project) }}">Yearly</a>
  </div>
  <a class="calendar-nav" href="{{ url_for('calendar.day_view_route', date=prev_day.strftime('%Y-%m-%d'), proj=project) }}">Prev</a>
  <div class="calendar-title">{{ day_date.strftime('%Y-%m-%d') }}</div>
  <a class="calendar-nav" href="{{ url_for('calendar.day_view_route', date=next_day.strftime('%Y-%m-%d'), proj=project) }}">Next</a>
  <a class="calendar-add-main" href="{{ url_for('calendar.add_event_route', date=day_date.strftime('%Y-%m-%d'), proj=project) }}">Add Event</a>
  <a class="calendar-add-main" href="{{ url_for('calendar.import_events_route', proj=project) }}">Import Events</a>
</div>

<div style="display:flex; gap:16px;">
  <div style="flex:1; max-width:180px;">
    {% include "widgets/wid_calendar_mini_month.html" %}
  </div>
  <div style="flex:2;">
    <h5>Events</h5>
    {% if events %}
    <ul style="list-style:none; padding:0; margin:0;">
      {% for ev in events %}
      <li style="padding:6px 0;">
        {% if ev.time %}<strong>{{ ev.time }}</strong>{% endif %}
        <span>{{ ev.title }}</span>
        <span class="calendar-actions">
          <a href="{{ url_for('calendar.edit_event_route', event_id=ev.id) }}">Edit</a>
          <a href="{{ url_for('calendar.delete_event_route', event_id=ev.id, year=day_date.year, month=day_date.month, proj=project) }}" onclick="return confirm('Delete event?');">Del</a>
        </span>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <p>No events for this day.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
