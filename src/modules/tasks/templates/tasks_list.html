{% extends "layout.html" %}
{% block module_content %}
<h1>Tasks</h1>
  <a href="{{ url_for('tasks.add_task_route', proj=project) }}">ãƒ› Add Task</a>
  <a href="{{ url_for('tasks.import_tasks_route', proj=project) }}">Import Tasks</a>

{% set link_list_type = "task" %}
{% set link_list_context_id = "tasks_list" %}
{% set link_table_id = "tasks-table" %}
{% include "widgets/links_bulk_toolbar.html" %}

<table border="1" cellpadding="5" id="tasks-table">
  <tr>
    <th><input type="checkbox" class="link-select-all"></th>
    {% for col in col_list %}
    {% set next_dir = 'asc' if sort_col != col or sort_dir == 'desc' else 'desc' %}
    <th>
      <a href="{{ url_for('tasks.list_tasks_route', proj=project, sort=col, dir=next_dir) }}">{{ col.replace('_', ' ') }}</a>
      {% if sort_col == col %} {{ '^' if sort_dir == 'asc' else 'v' }}{% endif %}
    </th>
    {% endfor %}
    <th>Actions</th>
  </tr>
  {% for task in tasks %}
  <tr class="link-draggable" data-record-type="task" data-record-id="{{ task.id }}" data-record-title="{{ task.title }}">
    <td><input type="checkbox" class="link-select" data-record-type="task" data-record-id="{{ task.id }}" data-record-title="{{ task.title }}"></td>
    {% for col in col_list %}
    <td>{{ task[col] }}</td>
    {% endfor %}
    <td>
      <a href="{{ url_for('tasks.edit_task_route', task_id=task.id) }}">Edit</a> |
      <a href="{{ url_for('tasks.delete_task_route', task_id=task.id) }}" onclick="return confirm('Delete task?');">Del</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% include "widgets/wid_pagination.html" %}
{% endblock %}
